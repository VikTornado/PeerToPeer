{% extends 'base.html' %}

{% block title %}{{ news.title }} | PeerToPeer{% endblock %}

{% block meta_tags %}
<!-- Open Graph / Facebook -->
<meta property="og:type" content="article">
<meta property="og:url" content="{{ request.build_absolute_uri }}">
<meta property="og:title" content="{{ news.title }}">
<meta property="og:description" content="{{ news.content|striptags|truncatewords:30 }}">
{% if news.main_image %}
<meta property="og:image" content="{{ request.scheme }}://{{ request.get_host }}{{ news.main_image.url }}">
{% else %}
<meta property="og:image" content="{% static 'images/og-image.jpg' %}">
{% endif %}

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="{{ request.build_absolute_uri }}">
<meta property="twitter:title" content="{{ news.title }}">
<meta property="twitter:description" content="{{ news.content|striptags|truncatewords:30 }}">
{% if news.main_image %}
<meta property="twitter:image" content="{{ request.scheme }}://{{ request.get_host }}{{ news.main_image.url }}">
{% else %}
<meta property="twitter:image" content="{% static 'images/og-image.jpg' %}">
{% endif %}
{% endblock %}

{% block content %}
<section class="max-w-screen-xl mx-auto px-4 py-10">
  <h1 class="text-2xl sm:text-3xl font-bold mb-6 text-center text-gray-800 break-words">
    {{ news.title }}
  </h1>

  {% if news.main_image %}
    <div class="mb-6">
      <img src="{{ news.main_image.url }}" alt="{{ news.title }}" class="w-full max-h-[400px] sm:max-h-[500px] object-cover rounded shadow" loading="lazy" aria-label="{{ news.title }}">
    </div>
  {% endif %}

  <div class="prose max-w-none text-gray-700 mb-8">
    {{ news.content|safe }}
  </div>

  {% if news.images.exists %}
    <div class="mt-8 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
      {% for img in news.images.all %}
        <img src="{{ img.image.url }}" alt="{{ img.image.name|default:'Зображення до новини' }}" class="w-full h-48 object-cover rounded shadow" loading="lazy" aria-label="{{ img.image.name|default:'Зображення до новини' }}">
      {% endfor %}
    </div>
  {% endif %}

  <div class="mt-10 text-center space-y-4 sm:space-y-0 sm:space-x-4 sm:flex sm:justify-center">
    <div class="text-center mt-5 flex flex-col sm:flex-row justify-center gap-4">
      <a href="/" class="btn btn-link text-primary hover:underline" aria-label="Повернутися на головну">← Повернутися на головну</a>
      <a href="{% url 'news' %}" class="btn btn-link text-primary hover:underline" aria-label="Перейти до архіву новин">→ Перейти до архіву новин</a>
    </div>
  </div>
</section>
{% endblock %}