{% load static %}
{% load i18n %}
<!-- Ensure CSS is included in the base template. If header is used standalone, include CSS here as fallback. -->
<link href="{% static 'css/styles.css' %}" rel="stylesheet">
<header class="bg-white border-b shadow-sm relative z-50">
  <div class="max-w-screen-xl mx-auto px-4 py-3 flex items-center justify-between">
    
    <!-- Logo -->
    <a href="/" class="text-xl font-bold text-blue-600">{% trans "PeerToPeer" %}</a>

    <!-- Desktop Navigation -->
    <nav class="hidden md:flex space-x-6">
      <a href="/" class="{% if request.path == '/' %}text-blue-600 font-semibold{% else %}text-gray-700{% endif %} hover:text-blue-600">{% trans "Головна" %}</a>
      <a href="/statut/" class="{% if request.path == '/statut/' %}text-blue-600 font-semibold{% else %}text-gray-700{% endif %} hover:text-blue-600">{% trans "Статутна діяльність" %}</a>
      <a href="/international/" class="{% if request.path == '/international/' %}text-blue-600 font-semibold{% else %}text-gray-700{% endif %} hover:text-blue-600">{% trans "Міжнародна діяльність" %}</a>
      <a href="/volunteering/" class="{% if request.path == '/volunteering/' %}text-blue-600 font-semibold{% else %}text-gray-700{% endif %} hover:text-blue-600">{% trans "Волонтерство" %}</a>
      <a href="/projects/" class="{% if request.path == '/projects/' %}text-blue-600 font-semibold{% else %}text-gray-700{% endif %} hover:text-blue-600">{% trans "Участь у проєктах" %}</a>
      <a href="{% url 'about' %}" class="{% if request.path == '/about/' %}text-blue-600 font-semibold{% else %}text-gray-700{% endif %} hover:text-blue-600">{% trans "Про нас" %}</a>
      <a href="/contacts/" class="{% if request.path == '/contacts/' %}text-blue-600 font-semibold{% else %}text-gray-700{% endif %} hover:text-blue-600">{% trans "Контакти" %}</a>
      
    </nav>

    <!-- Actions (Desktop + Mobile) -->
    <div class="flex items-center space-x-4">

{% if user.is_authenticated %}
  <a href="{% url 'admin:logout' %}" class="text-sm text-blue-600 hover:underline">{% trans "Вийти" %}</a>
{% else %}
  <a href="{% url 'admin:login' %}" class="text-sm text-blue-600 hover:underline">{% trans "Увійти" %}</a>
{% endif %}

<!-- Language Switcher with flags -->
<form action="{% url 'set_language' %}" method="post" class="flex items-center space-x-2">
  {% csrf_token %}
  <input type="hidden" name="next" value="{{ request.path }}">

  <button type="submit" name="language" value="uk"
    class="{% if LANGUAGE_CODE == 'uk' %}ring-2 ring-blue-500{% endif %} rounded hover:ring-2 hover:ring-blue-300 transition">
    <img src="{% static 'images/flag-ua.svg' %}" alt="UA" class="w-6 h-4">
  </button>

  <button type="submit" name="language" value="en"
    class="{% if LANGUAGE_CODE == 'en' %}ring-2 ring-blue-500{% endif %} rounded hover:ring-2 hover:ring-blue-300 transition">
    <img src="{% static 'images/flag-en.svg' %}" alt="EN" class="w-6 h-4">
  </button>
</form>

      <!-- Hamburger Button (mobile only) -->
      <button id="mobile-menu-toggle" class="md:hidden text-gray-600 focus:outline-none z-50">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2"
             viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round"
                d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
      </button>

    </div>
  </div>

  <!-- Mobile Overlay -->
  <div id="mobile-overlay" class="fixed inset-0 bg-black bg-opacity-50 hidden z-40"></div>

  <!-- Mobile Menu -->
  <div id="mobile-menu"
       class="md:hidden fixed top-0 right-0 w-64 h-full bg-white shadow-lg transform translate-x-full transition-transform duration-300 ease-in-out z-50">

    <div class="flex justify-end p-4">
      <button id="mobile-menu-close" class="text-gray-600">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round"
                d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
    </div>

    <!-- Mobile Navigation -->
    <nav class="flex flex-col space-y-4 px-6">
      <a href="/" class="{% if request.path == '/' %}text-blue-600 font-semibold{% else %}text-gray-700{% endif %}">{% trans "Головна" %}</a>
      <a href="/statut/" class="{% if request.path == '/statut/' %}text-blue-600 font-semibold{% else %}text-gray-700{% endif %}">{% trans "Статутна діяльність" %}</a>
      <a href="/international/" class="{% if request.path == '/international/' %}text-blue-600 font-semibold{% else %}text-gray-700{% endif %}">{% trans "Міжнародна діяльність" %}</a>
      <a href="/volunteering/" class="{% if request.path == '/volunteering/' %}text-blue-600 font-semibold{% else %}text-gray-700{% endif %}">{% trans "Волонтерство" %}</a>
      <a href="/projects/" class="{% if request.path == '/projects/' %}text-blue-600 font-semibold{% else %}text-gray-700{% endif %}">{% trans "Участь у проєктах" %}</a>
      <a href="{% url 'about' %}" class="{% if request.path == '/about/' %}text-blue-600 font-semibold{% else %}text-gray-700{% endif %}">{% trans "Про нас" %}</a>
      <a href="/contacts/" class="{% if request.path == '/contacts/' %}text-blue-600 font-semibold{% else %}text-gray-700{% endif %}">{% trans "Контакти" %}</a>

      <!-- Login -->
      <a href="#" class="text-sm text-blue-600 border border-blue-600 px-3 py-1 rounded hover:bg-blue-50">{% trans "Увійти" %}</a>

<!-- Language Switcher with flags -->
<form action="{% url 'set_language' %}" method="post" class="flex items-center space-x-2">
  {% csrf_token %}
  <input type="hidden" name="next" value="{{ request.path }}">

  <button type="submit" name="language" value="uk"
    class="{% if LANGUAGE_CODE == 'uk' %}ring-2 ring-blue-500{% endif %} rounded hover:ring-2 hover:ring-blue-300 transition">
    <img src="{% static 'images/flag-ua.svg' %}" alt="UA" class="w-6 h-4">
  </button>

  <button type="submit" name="language" value="en"
    class="{% if LANGUAGE_CODE == 'en' %}ring-2 ring-blue-500{% endif %} rounded hover:ring-2 hover:ring-blue-300 transition">
    <img src="{% static 'images/flag-en.svg' %}" alt="EN" class="w-6 h-4">
  </button>
</form>
    </nav>

  </div>

  <!-- Mobile Menu Script -->
  <script>
    const toggleBtn = document.getElementById('mobile-menu-toggle');
    const closeBtn = document.getElementById('mobile-menu-close');
    const menu = document.getElementById('mobile-menu');
    const overlay = document.getElementById('mobile-overlay');

    toggleBtn.addEventListener('click', () => {
      menu.classList.remove('translate-x-full');
      overlay.classList.remove('hidden');
    });

    closeBtn.addEventListener('click', () => {
      menu.classList.add('translate-x-full');
      overlay.classList.add('hidden');
    });

    overlay.addEventListener('click', () => {
      menu.classList.add('translate-x-full');
      overlay.classList.add('hidden');
    });
  </script>

</header>