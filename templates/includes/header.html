{% load static %}
{% load i18n %}
<!-- Ensure CSS is included in the base template. If header is used standalone, include CSS here as fallback. -->
<link href="{% static 'css/styles.css' %}" rel="stylesheet">
<header class="bg-gray-50 shadow-sm relative z-50">

  <div class="w-full max-w-8xl mx-auto px-4 py-8 flex items-center justify-between">
    
    <!-- Logo -->
    <a href="/" class="text-xl mx-2 font-bold text-[#0057B8]">{% trans "PeerToPeer" %}</a>

    <!-- Desktop Navigation -->
    <nav class="hidden md:flex space-x-6 items-center">
      <a href="/" class="{% if request.path == '/' %}text-[#0057B8] font-semibold{% else %}text-gray-700{% endif %} ml-2 hover:text-[#0057B8]">{% trans "Головна" %}</a>
      
      <a href="{% url 'about' %}" class="{% if request.path == '/about/' %}text-[#0057B8] font-semibold{% else %}text-gray-700{% endif %} hover:text-[#0057B8]">{% trans "Про нас" %}</a>
      
      <!-- Activities Dropdown -->
      <div class="relative" x-data="{ open: false }" @mouseenter="open = true" @mouseleave="open = false">
        <button class="flex items-center text-gray-700 hover:text-[#0057B8] focus:outline-none h-full">
          <span class="{% if '/statut/' in request.path or '/international/' in request.path or '/volunteering/' in request.path or '/projects/' in request.path %}text-[#0057B8] font-semibold{% endif %}">{% trans "Діяльність" %}</span>
          <svg class="w-4 h-4 ml-1 transform transition-transform duration-200" :class="{'rotate-180': open}" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
        </button>
        
        <div x-show="open" 
             x-transition:enter="transition ease-out duration-200"
             x-transition:enter-start="opacity-0 translate-y-2"
             x-transition:enter-end="opacity-100 translate-y-0"
             x-transition:leave="transition ease-in duration-150"
             x-transition:leave-start="opacity-100 translate-y-0"
             x-transition:leave-end="opacity-0 translate-y-2"
             class="absolute left-0 mt-0 w-56 bg-white rounded-md shadow-lg py-2 z-50 border border-gray-100">
          <a href="/volunteering/" class="block px-4 py-2 text-sm {% if request.path == '/volunteering/' %}text-[#0057B8] font-semibold{% else %}text-gray-700{% endif %} hover:bg-gray-50 hover:text-[#0057B8]">{% trans "Волонтерська діяльність" %}</a>
          <a href="/statut/" class="block px-4 py-2 text-sm {% if request.path == '/statut/' %}text-[#0057B8] font-semibold{% else %}text-gray-700{% endif %} hover:bg-gray-50 hover:text-[#0057B8]">{% trans "Міжнародна діяльність" %}</a>
          <a href="/volunteering/" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-[#0057B8]">{% trans "Освітня діяльність" %}</a>
          <a href="/international/" class="block px-4 py-2 text-sm {% if request.path == '/international/' %}text-[#0057B8] font-semibold{% else %}text-gray-700{% endif %} hover:bg-gray-50 hover:text-[#0057B8]">{% trans "Видання та публікації" %}</a>
          <a href="/projects/" class="block px-4 py-2 text-sm {% if request.path == '/projects/' %}text-[#0057B8] font-semibold{% else %}text-gray-700{% endif %} hover:bg-gray-50 hover:text-[#0057B8]">{% trans "Участь у проектах" %}</a>
        </div>
      </div>

      <a href="/contacts/" class="{% if request.path == '/contacts/' %}text-[#0057B8] font-semibold{% else %}text-gray-700{% endif %} hover:text-[#0057B8]">{% trans "Контакти" %}</a>
      
    </nav>

    <!-- Actions (Desktop + Mobile) -->
    <div class="flex items-center space-x-4 px-2">
<div class="flex items-center space-x-4 hidden md:flex">
  {% if user.is_authenticated %}
  <a href="{% url 'admin:logout' %}" class="text-[#0057B8] hover:text-[#004494] transition" title="{% trans 'Вийти' %}">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
      <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75" />
    </svg>
  </a>
  {% if user.is_staff %}
  <a href="{% url 'admin:index' %}" class="text-[#0057B8] hover:text-[#004494] transition" title="{% trans 'Адмін панель' %}">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
      <path stroke-linecap="round" stroke-linejoin="round" d="M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z" />
      <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
    </svg>
  </a>
  {% endif %}
{% else %}
  <a href="{% url 'admin:login' %}" class="text-[#0057B8] hover:text-[#004494] transition" title="{% trans 'Увійти' %}">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
      <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" />
    </svg>
  </a>
{% endif %}

<!-- Donate Button -->
<a href="{% url 'donate' %}" class="hidden md:inline-block px-4 py-2 bg-[#FFD700] text-[#212529] font-bold rounded-lg hover:bg-yellow-400 transition shadow-sm">
  {% trans "Підтримати" %}
</a>

<!-- Language Switcher with flags -->
<form action="{% url 'set_language' %}" method="post" class="flex items-center space-x-2">
  {% csrf_token %}
  <input type="hidden" name="next" value="{{ request.path }}">


  <button type="submit" name="language" value="uk"
    class="{% if LANGUAGE_CODE == 'uk' %}ring-2 ring-[#0057B8]{% endif %} rounded hover:ring-2 hover:ring-[#0057B8] transition">
    <img src="{% static 'images/flag-ua.svg' %}" alt="UA" class="w-6 h-4">
  </button>

  <button type="submit" name="language" value="en"
    class="{% if LANGUAGE_CODE == 'en' %}ring-2 ring-[#0057B8]{% endif %} rounded hover:ring-2 hover:ring-[#0057B8] transition">
    <img src="{% static 'images/flag-en.svg' %}" alt="EN" class="w-6 h-4">
  </button>
</form>
  </div>
      <!-- Hamburger Button (mobile only) -->
      <button id="mobile-menu-toggle" class="md:hidden text-gray-600 focus:outline-none z-50">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2"
             viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round"
                d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
      </button>

    </div>
  </div>

  <!-- Mobile Overlay -->
  <div id="mobile-overlay" class="fixed inset-0 bg-black bg-opacity-50 hidden z-40"></div>

  <!-- Mobile Menu -->
  <div id="mobile-menu"
       class="md:hidden fixed top-0 right-0 w-64 h-full bg-white shadow-lg transform translate-x-full transition-transform duration-300 ease-in-out z-50">

    <div class="flex justify-end p-4">
      <button id="mobile-menu-close" class="text-gray-600">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round"
                d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
    </div>

    <!-- Mobile Navigation -->
    <nav class="flex flex-col space-y-4 px-6">
      <a href="/" class="{% if request.path == '/' %}text-[#0057B8] font-semibold{% else %}text-gray-700{% endif %}">{% trans "Головна" %}</a>
      <a href="{% url 'about' %}" class="{% if request.path == '/about/' %}text-[#0057B8] font-semibold{% else %}text-gray-700{% endif %}">{% trans "Про нас" %}</a>

      <!-- Mobile Activities Dropdown -->
      <div x-data="{ open: false }">
        <button @click="open = !open" class="flex items-center justify-between w-full text-gray-700 hover:text-[#0057B8]">
          <span class="{% if '/statut/' in request.path or '/international/' in request.path or '/volunteering/' in request.path or '/projects/' in request.path %}text-[#0057B8] font-semibold{% endif %}">{% trans "Діяльність" %}</span>
          <svg class="w-4 h-4 transform transition-transform duration-200" :class="{'rotate-180': open}" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
        </button>
        <div x-show="open" x-collapse class="pl-4 mt-2 space-y-2 border-l-2 border-gray-100">
          <a href="/volunteering/" class="block text-sm {% if request.path == '/volunteering/' %}text-[#0057B8] font-semibold{% else %}text-gray-600{% endif %}">{% trans "Волонтерська діяльність" %}</a>
          <a href="/statut/" class="block text-sm {% if request.path == '/statut/' %}text-[#0057B8] font-semibold{% else %}text-gray-600{% endif %}">{% trans "Міжнародна діяльність" %}</a>
          <a href="/volunteering/" class="block text-sm text-gray-600">{% trans "Освітня діяльність" %}</a>
          <a href="/international/" class="block text-sm {% if request.path == '/international/' %}text-[#0057B8] font-semibold{% else %}text-gray-600{% endif %}">{% trans "Видання та публікації" %}</a>
          <a href="/projects/" class="block text-sm {% if request.path == '/projects/' %}text-[#0057B8] font-semibold{% else %}text-gray-600{% endif %}">{% trans "Участь у проектах" %}</a>
        </div>
      </div>

      <a href="/contacts/" class="{% if request.path == '/contacts/' %}text-[#0057B8] font-semibold{% else %}text-gray-700{% endif %}">{% trans "Контакти" %}</a>
      
      <!-- Donate Button Mobile -->
      <a href="{% url 'donate' %}" class="block w-full text-center px-4 py-3 bg-[#FFD700] text-[#212529] font-bold rounded-lg hover:bg-yellow-400 transition shadow-sm">
        {% trans "Підтримати" %}
      </a>

      <!-- Login/Logout Mobile -->
      {% if user.is_authenticated %}
        <a href="{% url 'admin:logout' %}" class="flex items-center text-[#0057B8] hover:text-[#004494] transition">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 mr-2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75" />
          </svg>
          <!-- <span class="text-lg">{% trans "Вийти" %}</span> -->
        </a>
        {% if user.is_staff %}
        <a href="{% url 'admin:index' %}" class="flex items-center text-[#0057B8] hover:text-[#004494] transition">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 mr-2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z" />
            <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
          </svg>
          <span class="text-lg">{% trans "Адмін панель" %}</span>
        </a>
        {% endif %}
      {% else %}
        <a href="{% url 'admin:login' %}" class="flex items-center text-[#0057B8] hover:text-[#004494] transition">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 mr-2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" />
          </svg>
          <span class="text-lg">{% trans "Увійти" %}</span>
        </a>
      {% endif %}
      

<!-- Language Switcher with flags -->
<form action="{% url 'set_language' %}" method="post" class="flex items-center space-x-2">
  {% csrf_token %}
  <input type="hidden" name="next" value="{{ request.path }}">

  <button type="submit" name="language" value="uk"
    class="{% if LANGUAGE_CODE == 'uk' %}ring-2 ring-[#0057B8]{% endif %} rounded hover:ring-2 hover:ring-[#0057B8] transition">
    <img src="{% static 'images/flag-ua.svg' %}" alt="UA" class="w-6 h-4">
  </button>

  <button type="submit" name="language" value="en"
    class="{% if LANGUAGE_CODE == 'en' %}ring-2 ring-[#0057B8]{% endif %} rounded hover:ring-2 hover:ring-[#0057B8] transition">
    <img src="{% static 'images/flag-en.svg' %}" alt="EN" class="w-6 h-4">
  </button>
</form>
    </nav>

  </div>

  <!-- Mobile Menu Script -->
  <script>
    const toggleBtn = document.getElementById('mobile-menu-toggle');
    const closeBtn = document.getElementById('mobile-menu-close');
    const menu = document.getElementById('mobile-menu');
    const overlay = document.getElementById('mobile-overlay');

    toggleBtn.addEventListener('click', () => {
      menu.classList.remove('translate-x-full');
      overlay.classList.remove('hidden');
    });

    closeBtn.addEventListener('click', () => {
      menu.classList.add('translate-x-full');
      overlay.classList.add('hidden');
    });

    overlay.addEventListener('click', () => {
      menu.classList.add('translate-x-full');
      overlay.classList.add('hidden');
    });
  </script>

</header>