{% load static %}
{% load i18n %}
<!-- Ensure CSS is included in the base template. If header is used standalone, include CSS here as fallback. -->
<link href="{% static 'css/styles.css' %}" rel="stylesheet">
<header class="bg-white shadow-sm relative z-50">

  <div class="w-full max-w-8xl mx-auto px-4 py-8 flex items-center justify-between">
    
    <!-- Logo -->
    <a href="/" class="text-xl mx-2 font-bold text-[#0057B8]">{% trans "PeerToPeer" %}</a>

    <!-- Desktop Navigation -->
    <nav class="hidden md:flex space-x-6">
      <a href="/" class="{% if request.path == '/' %}text-[#0057B8] font-semibold{% else %}text-gray-700{% endif %} ml-2 hover:text-[#0057B8]">{% trans "Головна" %}</a>
      
      <!-- Activities Dropdown -->
      <div class="relative" x-data="{ open: false }" @mouseenter="open = true" @mouseleave="open = false">
        <button class="flex items-center text-gray-700 hover:text-[#0057B8] focus:outline-none h-full">
          <span class="{% if '/statut/' in request.path or '/international/' in request.path or '/volunteering/' in request.path or '/projects/' in request.path %}text-[#0057B8] font-semibold{% endif %}">{% trans "Діяльність фонду" %}</span>
          <svg class="w-4 h-4 ml-1 transform transition-transform duration-200" :class="{'rotate-180': open}" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
        </button>
        
        <div x-show="open" 
             x-transition:enter="transition ease-out duration-200"
             x-transition:enter-start="opacity-0 translate-y-2"
             x-transition:enter-end="opacity-100 translate-y-0"
             x-transition:leave="transition ease-in duration-150"
             x-transition:leave-start="opacity-100 translate-y-0"
             x-transition:leave-end="opacity-0 translate-y-2"
             class="absolute left-0 mt-0 w-56 bg-white rounded-md shadow-lg py-2 z-50 border border-gray-100">
          <a href="/statut/" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-[#0057B8]">{% trans "Статутна діяльність" %}</a>
          <a href="/international/" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-[#0057B8]">{% trans "Міжнародна діяльність" %}</a>
          <a href="/volunteering/" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-[#0057B8]">{% trans "Волонтерство" %}</a>
          <a href="/projects/" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-[#0057B8]">{% trans "Участь у проєктах" %}</a>
        </div>
      </div>

      <a href="{% url 'about' %}" class="{% if request.path == '/about/' %}text-[#0057B8] font-semibold{% else %}text-gray-700{% endif %} hover:text-[#0057B8]">{% trans "Про нас" %}</a>
      <a href="/contacts/" class="{% if request.path == '/contacts/' %}text-[#0057B8] font-semibold{% else %}text-gray-700{% endif %} hover:text-[#0057B8]">{% trans "Контакти" %}</a>
      
    </nav>

    <!-- Actions (Desktop + Mobile) -->
    <div class="flex items-center space-x-4 px-2">
<div class="flex items-center space-x-4 hidden md:flex">
  {% if user.is_authenticated %}
  <a href="{% url 'admin:logout' %}" class="text-lg text-[#0057B8] hover:underline">{% trans "Вийти" %}</a>
{% else %}
  <a href="{% url 'admin:login' %}" class="text-lg text-[#0057B8] hover:underline">{% trans "Увійти" %}</a>
{% endif %}

<!-- Language Switcher with flags -->
<form action="{% url 'set_language' %}" method="post" class="flex items-center space-x-2">
  {% csrf_token %}
  <input type="hidden" name="next" value="{{ request.path }}">


  <button type="submit" name="language" value="uk"
    class="{% if LANGUAGE_CODE == 'uk' %}ring-2 ring-[#0057B8]{% endif %} rounded hover:ring-2 hover:ring-[#0057B8] transition">
    <img src="{% static 'images/flag-ua.svg' %}" alt="UA" class="w-6 h-4">
  </button>

  <button type="submit" name="language" value="en"
    class="{% if LANGUAGE_CODE == 'en' %}ring-2 ring-[#0057B8]{% endif %} rounded hover:ring-2 hover:ring-[#0057B8] transition">
    <img src="{% static 'images/flag-en.svg' %}" alt="EN" class="w-6 h-4">
  </button>
</form>
  </div>
      <!-- Hamburger Button (mobile only) -->
      <button id="mobile-menu-toggle" class="md:hidden text-gray-600 focus:outline-none z-50">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2"
             viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round"
                d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
      </button>

    </div>
  </div>

  <!-- Mobile Overlay -->
  <div id="mobile-overlay" class="fixed inset-0 bg-black bg-opacity-50 hidden z-40"></div>

  <!-- Mobile Menu -->
  <div id="mobile-menu"
       class="md:hidden fixed top-0 right-0 w-64 h-full bg-white shadow-lg transform translate-x-full transition-transform duration-300 ease-in-out z-50">

    <div class="flex justify-end p-4">
      <button id="mobile-menu-close" class="text-gray-600">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round"
                d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
    </div>

    <!-- Mobile Navigation -->
    <nav class="flex flex-col space-y-4 px-6">
      <a href="/" class="{% if request.path == '/' %}text-[#0057B8] font-semibold{% else %}text-gray-700{% endif %}">{% trans "Головна" %}</a>
      
      <!-- Mobile Activities Dropdown -->
      <div x-data="{ open: false }">
        <button @click="open = !open" class="flex items-center justify-between w-full text-gray-700 hover:text-[#0057B8]">
          <span class="{% if '/statut/' in request.path or '/international/' in request.path or '/volunteering/' in request.path or '/projects/' in request.path %}text-[#0057B8] font-semibold{% endif %}">{% trans "Діяльність фонду" %}</span>
          <svg class="w-4 h-4 transform transition-transform duration-200" :class="{'rotate-180': open}" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
        </button>
        <div x-show="open" x-collapse class="pl-4 mt-2 space-y-2 border-l-2 border-gray-100">
          <a href="/statut/" class="block text-sm {% if request.path == '/statut/' %}text-[#0057B8] font-semibold{% else %}text-gray-600{% endif %}">{% trans "Статутна діяльність" %}</a>
          <a href="/international/" class="block text-sm {% if request.path == '/international/' %}text-[#0057B8] font-semibold{% else %}text-gray-600{% endif %}">{% trans "Міжнародна діяльність" %}</a>
          <a href="/volunteering/" class="block text-sm {% if request.path == '/volunteering/' %}text-[#0057B8] font-semibold{% else %}text-gray-600{% endif %}">{% trans "Волонтерство" %}</a>
          <a href="/projects/" class="block text-sm {% if request.path == '/projects/' %}text-[#0057B8] font-semibold{% else %}text-gray-600{% endif %}">{% trans "Участь у проєктах" %}</a>
        </div>
      </div>

      <a href="{% url 'about' %}" class="{% if request.path == '/about/' %}text-[#0057B8] font-semibold{% else %}text-gray-700{% endif %}">{% trans "Про нас" %}</a>
      <a href="/contacts/" class="{% if request.path == '/contacts/' %}text-[#0057B8] font-semibold{% else %}text-gray-700{% endif %}">{% trans "Контакти" %}</a>

      <!-- Login -->
      <a href="#" class="text-lg text-[#0057B8] hover:underline">{% trans "Увійти" %}</a>

<!-- Language Switcher with flags -->
<form action="{% url 'set_language' %}" method="post" class="flex items-center space-x-2">
  {% csrf_token %}
  <input type="hidden" name="next" value="{{ request.path }}">

  <button type="submit" name="language" value="uk"
    class="{% if LANGUAGE_CODE == 'uk' %}ring-2 ring-[#0057B8]{% endif %} rounded hover:ring-2 hover:ring-[#0057B8] transition">
    <img src="{% static 'images/flag-ua.svg' %}" alt="UA" class="w-6 h-4">
  </button>

  <button type="submit" name="language" value="en"
    class="{% if LANGUAGE_CODE == 'en' %}ring-2 ring-[#0057B8]{% endif %} rounded hover:ring-2 hover:ring-[#0057B8] transition">
    <img src="{% static 'images/flag-en.svg' %}" alt="EN" class="w-6 h-4">
  </button>
</form>
    </nav>

  </div>

  <!-- Mobile Menu Script -->
  <script>
    const toggleBtn = document.getElementById('mobile-menu-toggle');
    const closeBtn = document.getElementById('mobile-menu-close');
    const menu = document.getElementById('mobile-menu');
    const overlay = document.getElementById('mobile-overlay');

    toggleBtn.addEventListener('click', () => {
      menu.classList.remove('translate-x-full');
      overlay.classList.remove('hidden');
    });

    closeBtn.addEventListener('click', () => {
      menu.classList.add('translate-x-full');
      overlay.classList.add('hidden');
    });

    overlay.addEventListener('click', () => {
      menu.classList.add('translate-x-full');
      overlay.classList.add('hidden');
    });
  </script>

</header>